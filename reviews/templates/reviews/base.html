<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Stay Story{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/all.css' %}" />
</head>
<body>
    <nav>
        <img src="{% static 'images/logo.png' %}" alt="Stay Story Logo" />
        <h2>StayStory</h2>

        <ul class="nav-buttons">

          {% if user.is_authenticated %}

    <img src="{{ request.user.profile.avatar.url }}" alt="Avatar" onclick="togglePopup()" class="avatar-img">

    <p>Welcome, {{ user.username }}!</p>
    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>
{% else %}
    <a href="{% url 'login' %}">Login</a>
    <a href="{% url 'reviews:signup' %}">Sign Up</a>
{% endif %}
        </ul>
    </nav>


    <main>
        {% block content %}
        {% endblock %}
    </main>
<div id="profilePopup" class="popup-overlay">
  <div class="popup-content">
    <span class="close-btn" onclick="togglePopup()">&times;</span>

    <h3>Edit Profile</h3>

    <form method="post" action="{% url 'reviews:edit_profile' %}" enctype="multipart/form-data">
      {% csrf_token %}
      <div style="text-align: center;">
        <img src="{{ request.user.profile.avatar.url }}" alt="Avatar" class="avatar-img" style="width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px;">
      </div>

      {{ form.as_p }}

      <button type="submit">Save</button>
    </form>
  </div>
</div>
<script>
            function togglePopup() {
    const popup = document.getElementById("profilePopup");
    popup.style.display = (popup.style.display === "block") ? "none" : "block";
}
   
</script>

</body>
</html>